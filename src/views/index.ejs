<!DOCTYPE html>
<html lang="es">
<!-- Include Head -->
<%- include('partials/head', {title: 'Inicio'}) %>
<body>
	<!-- Header -->
	<%- include('partials/headerNavbar') %>
	<!-- /Header -->
	
	<!-- Banner -->
	<div class="banner"></div>
	<!-- /Banner -->

	<!-- ultima visita -->
	<div class="container products-wrapper">
		<div class="row">
			<div class="col-12">
				<h2 class="products-title">Basado en tu última visita</h2>
			</div>
			<!-- Recibo desde los controladores: array visited, array in-sale y toThousand() -->
			<!-- Show the "visited" products -->
			<% visited.forEach( product => { %>

				<div class="col-12 col-sm-6 col-lg-3"> <!-- cuidado de hacer el for con los estilos CSS incluídos-->
					
					<section class="product-box">

						<a href="/products/<%=product.id %>"> <!-- en el ejercicio, cada ficha debe llevar al detalle del producto, y ese id es una propiedad del objeto producto-->
							<figure class="product-box_image">
								<img src="/images/products/<%=product.image %> " alt="imagen de producto"> <!-- product porque ese es el nombre del parámetro del callback-->
							</figure>
							<article class="product-box_data">
								<h2> <%= product.price > 0 ? toThousand(product.price * ((100 - product.discount)/100)): toThousand(product.price) %> </h2> <!-- Se debe crear la condición para saber si el producto tiene descuento y mostrar el precio final con el descuento-->
								<% if (product.discount > 0) { %>
								<span><%= product.discount %> % OFF </span>
								<% } %>
								<p><%= product.name %></p>
								<i class="fas fa-truck"></i>
							</article>
						</a>
					</section>
					
				</div>

		 	<%}) %>
		</div>
	</div>
	<!-- /ultima visita -->

	<!-- Ofertas -->
	<div class="container products-wrapper">
		<div class="row">
			<div class="col-12">
				<h2 class="products-title">Ofertas</h2>
			</div>
			<!-- Recibo desde los controladores: array visited, array in-sale y toThousand() -->
			<!-- Show the "in-saled" products -->
			<% inSale.forEach( product => { %> 

				<div class="col-12 col-sm-6 col-lg-3"> <!-- cuidado de hacer el for con los estilos CSS incluídos-->
					
					<section class="product-box">

						<a href="/products/detail/ <%= product.id %>"> <!-- en el ejercicio, cada ficha debe llevar al detalle del producto, y ese id es una propiedad del objeto producto-->
							<figure class="product-box_image">
								<img src="/images/products/<%=product.image %> " alt="imagen de producto"> <!-- product porque ese es el nombre del parámetro del callback-->
							</figure>
							<article class="product-box_data">
								<h2> <%= product.price > 0 ? toThousand(product.price * ((100 - product.discount)/100)): toThousand(product.price) %> </h2> <!-- Se debe crear la condición para saber si el producto tiene descuento y mostrar el precio final con el descuento-->
									<% if (product.discount > 0) { %>
									<span><%= product.discount %> % OFF</span>
									<% } %>
								<p><%= product.name %></p>
								<i class="fas fa-truck"></i>
							</article>
						</a>
					</section>
					
				</div>

		 <%}) %>
		</div>
	</div>
	<!-- /Ofertas -->

	<!-- footer -->
	<%- include('partials/footer') %>
	<!-- /footer -->
</body>	
</html>